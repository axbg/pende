<html>

<body>
    <input id="ws" type="text">
    <button onclick="saveFile()">click</button>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
<script>
    function saveFile() {
        let fileContent = `#include<stdio.h>

int main() {
setbuf(stdout, NULL);

int x, y;

printf("Enter x : ");
//fflush(stdout);

scanf("%d", &x);

printf("Enter y : ");
//fflush(stdout);

scanf("%d", &y);

printf("Value entered y is %d\\n", y);
printf("Value entered x is %d\\n", x);

return 0;
}`;
        let file = {
            "user": "axbg",
            "path": "asdbd",
            "name": "run.c",
            "content": fileContent
        }

        socket.emit("structure", file);
    }

    let token = "something";
    let socket = io("http://localhost:8000", { query: { token: token } });

    socket.on("structured", (message) => {
        socket.emit("save", message);
    })

    socket.on("saved", (message) => {
        socket.emit("c-run", message);
    })

    socket.on("c-output", (message) => {
        console.log(message);
        socket.emit("c-input", 5);
    })

    socket.on("finished", () => {
        console.log("finished");
    })

</script>

</html>